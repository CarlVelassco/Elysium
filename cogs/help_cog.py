import discord
from discord import app_commands
from discord.ext import commands
import os

class HelpCog(commands.Cog):
    def __init__(self, bot):
        self.bot = bot

    @app_commands.command(name="help", description="–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥.")
    @app_commands.guild_only()
    async def help_command(self, interaction: discord.Interaction):
        # –ü–æ–ª—É—á–∞–µ–º ID —Ä–æ–ª–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
        admin_role_id = int(os.getenv('ADMIN_ROLE_ID'))
        admin_role = interaction.guild.get_role(admin_role_id)

        # –°–æ–∑–¥–∞–µ–º —ç–º–±–µ–¥ –¥–ª—è –≤—ã–≤–æ–¥–∞
        embed = discord.Embed(
            title="–°–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º –±–æ—Ç–∞",
            description="–ù–∏–∂–µ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω—ã –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –∏ –∏—Ö –æ–ø–∏—Å–∞–Ω–∏–µ.",
            color=discord.Color.blue()
        )

        # --- –û–±—â–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã ---
        embed.add_field(
            name="üìú –û–±—â–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã",
            value=(
                "`/logs` - –û–±—â–∏–π –ª–æ–≥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∑–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥.\n"
                "`/log <–∫–∞—Ç–µ–≥–æ—Ä–∏—è>` - –õ–æ–≥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.\n"
                "`/night_log` - –õ–æ–≥ –Ω–æ—á–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å –±–æ–Ω—É—Å–∞–º–∏.\n"
                "`/check <–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å>` - –õ–æ–≥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.\n"
                "`/makser` - –ü–∞–Ω–µ–ª—å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—É–º–º–∞—Ä–Ω–æ–≥–æ –æ—Ç—á–µ—Ç–∞ –ø–æ –±–∞–ª–ª–∞–º.\n"
                "`/eventstats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∏ –±–∞–ª–ª–∞–º –ø—Ä–æ–≤–µ–¥–µ–Ω–Ω—ã—Ö –∏–≤–µ–Ω—Ç–æ–≤.\n"
                "`/help` - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —ç—Ç–æ —Å–ø—Ä–∞–≤–æ—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ."
            ),
            inline=False
        )
        
        # --- –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ ---
        # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ —Ä–æ–ª–∏, –µ—Å–ª–∏ –æ–Ω–∞ –Ω–∞–π–¥–µ–Ω–∞
        role_mention = f" (—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–æ–ª—å {admin_role.mention})" if admin_role else ""
        embed.add_field(
            name=f"‚öôÔ∏è –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤{role_mention}",
            value=(
                "**–ö–∞—Ç–µ–≥–æ—Ä–∏–∏:**\n"
                "`/category create <–Ω–∞–∑–≤–∞–Ω–∏–µ>` - –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é.\n"
                "`/category delete <–Ω–∞–∑–≤–∞–Ω–∏–µ>` - –£–¥–∞–ª–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é.\n"
                "`/category add <–Ω–∞–∑–≤–∞–Ω–∏–µ> <–∏–≤–µ–Ω—Ç>` - –î–æ–±–∞–≤–∏—Ç—å –∏–≤–µ–Ω—Ç –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏—é.\n"
                "`/category remove <–Ω–∞–∑–≤–∞–Ω–∏–µ> <–∏–≤–µ–Ω—Ç>` - –£–¥–∞–ª–∏—Ç—å –∏–≤–µ–Ω—Ç –∏–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.\n"
                "`/category list` - –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏ –∏—Ö –∏–≤–µ–Ω—Ç–æ–≤.\n\n"
                "**–°–ø–∏—Å–æ–∫ Blum:**\n"
                "`/blum add <–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å>` - –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–ø–∏—Å–æ–∫ Blum.\n"
                "`/blum remove <–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å>` - –£–±—Ä–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ —Å–ø–∏—Å–∫–∞ Blum.\n"
                "`/blum list` - –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —Å–ø–∏—Å–∫–µ Blum.\n"
                "`/blum clear` - –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—Å—Ç–∏—Ç—å —Å–ø–∏—Å–æ–∫ Blum.\n\n"
                "**–ü—Ä–æ—á–µ–µ:**\n"
                "`/clear [–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ]` - –û—á–∏—Å—Ç–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Ç–µ–∫—É—â–µ–º –∫–∞–Ω–∞–ª–µ."
            ),
            inline=False
        )

        embed.set_footer(text="–ë–æ—Ç –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –ª–æ–≥–æ–≤")
        
        await interaction.response.send_message(embed=embed, ephemeral=True)

async def setup(bot: commands.Bot):
    await bot.add_cog(HelpCog(bot))
